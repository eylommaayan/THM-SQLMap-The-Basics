# THM-SQLMap-The-Basics
SQLMap הוא כלי קוד פתוח המיועד לאוטומציה של זיהוי וניצול חולשות מסוג SQL Injection (SQLi). במקום להזין ידנית גרשיים ופקודות SQL מורכבות, הכלי עושה זאת עבורנו במהירות וביעילות.  למה הוא כל כך חזק? תמיכה רחבה: עובד עם כמעט כל סוגי מסדי הנתונים (MySQL, PostgreSQL, Oracle, MSSQL ועוד).
* <img width="1780" height="856" alt="image" src="https://github.com/user-attachments/assets/6c06dc84-62f2-4542-914e-618a67b87416" />


בשמחה! נראה שאתה עובד על בניית מדריך (PT (Penetration Testing ב-GitHub עבור החדר של SQLMap ב-TryHackMe.

הנה ריכוז של הבסיס שאתה צריך להכיר ולהעביר הלאה, כתוב בצורה מקצועית וברורה:

---

## 🛠️ מה זה בעצם SQLMap?

**SQLMap** הוא כלי קוד פתוח המיועד לאוטומציה של זיהוי וניצול חולשות מסוג **SQL Injection (SQLi)**. במקום להזין ידנית גרשיים ופקודות SQL מורכבות, הכלי עושה זאת עבורנו במהירות וביעילות.

### למה הוא כל כך חזק?

* **תמיכה רחבה:** עובד עם כמעט כל סוגי מסדי הנתונים (MySQL, PostgreSQL, Oracle, MSSQL ועוד).
* **גילוי אוטומטי:** הוא יודע לזהות לבד איזה סוג הזרקה עובד (Blind, Error-based, Union-based).
* **שליטה מלאה:** מאפשר לשלוף טבלאות, להוריד נתונים, ואפילו לנסות להשיג Shell על השרת.

---

## 🚀 פקודות בסיסיות (צ'יט-שיט למדריך שלך)

כאשר אתה כותב את המדריך ב-GitHub, כדאי לחלק את הפקודות לפי שלבים:

| מטרה | פקודה |
| --- | --- |
| **סריקה בסיסית** | `sqlmap -u "http://target.com/page.php?id=1"` |
| **מציאת מסדי נתונים** | `sqlmap -u "URL" --dbs` |
| **הצגת טבלאות** | `sqlmap -u "URL" -D db_name --tables` |
| **שליפת נתונים (Dump)** | `sqlmap -u "URL" -D db_name -T users --dump` |
| **בדיקת בקשה מקובץ (Burp)** | `sqlmap -r request.txt` |

---


3. **אנונימיות:** ציין את האפשרות להשתמש ב-`--proxy` או `--tor` כדי להסתיר את זהות התוקף.

---
.

---

# מדריך: פגיעות SQL Injection (הזרקת SQL)

במשימה הקודמת למדנו כיצד אתרים ואפליקציות מתקשרים עם מסדי נתונים כדי לאחסן, לשנות ולשלוף נתונים בצורה מובנית. במשימה זו נראה כיצד האינטראקציה הזו מתבצעת בפועל דרך שאילתות SQL, וכיצד תוקפים מנצלים זאת לביצוע מתקפות SQL Injection.

> **הערה חשובה:** לפני שנמשיך, ודאו שאתם מנסים שיטות הזרקה ידניות או אוטומטיות רק לאחר קבלת אישור מפורש מבעל האפליקציה.

---

## 1. כיצד עובד תהליך התחברות תקין (Login)

נניח שיש לנו דף התחברות המבקש שם משתמש וסיסמה. נזין את הנתונים הבאים:

* **שם משתמש:** John
* **סיסמה:** Un@detectable444

ברגע שתזינו את הנתונים, האתר יקבל אותם, יבנה שאילתת SQL וישלח אותה למסד הנתונים:


**מה קורה במסד הנתונים?**
השאילתה תתבצע, ומסד הנתונים יבדוק אם קיים משתמש בשם `John` עם הסיסמה המדויקת שנשלחה. בגלל השימוש באופרטור הבוליאני **AND**, השאילתה תצליח רק אם **גם** שם המשתמש **וגם** הסיסמה תואמים למה ששמור במערכת. אם נמצאה התאמה, פרטי המשתמש יוחזרו לאפליקציה והוא יחובר למערכת.

---

## 2. הבנת הפגיעות (The Vulnerability)

לפעמים, כאשר הקלט של המשתמש אינו עובר "ניקוי" (Sanitization) או אימות (Validation), תוקפים יכולים לתמרן את הקלט ולכתוב שאילתות SQL שירוצו במסד הנתונים ויבצעו פעולות שהתוקף חפץ בהן.

להזרקת SQL יש השפעה הרסנית, מכיוון שארגונים מאחסנים את כל המידע הקריטי שלהם בתוך מסדי נתונים. מתקפה מוצלחת יכולה להוביל לחשיפת מידע רגיש.

---

## 3. כיצד מתבצעת המתקפה?

נניח שדף ההתחברות שדיברנו עליו אינו מבצע אימות קלט (פגיע ל-SQLi). התוקף אינו יודע את הסיסמה של John, ולכן הוא יזין את הפרטים הבאים:

* **שם משתמש:** John
* **סיסמה:** `abc' OR 1=1;-- -`

השאילתה שהאתר ישלח למסד הנתונים תיראה כעת כך:


### פירוק השאילתה המניפולטיבית:

1. **הגרש הבודד (`'`):** הגרש שמופיע אחרי ה-`abc` סוגר את מחרוזת הטקסט המקורית של הסיסמה בשאילתה.
2. **התנאי `OR 1=1`:** האופרטור `OR` בודק אם לפחות אחד מהצדדים אמת. מכיוון ש-`1=1` הוא תמיד אמת (**True**), כל התנאי הופך לאמת, ללא קשר לשאלה אם הסיסמה `abc` נכונה או לא.
3. **הסימנים `;-- -`:** אלו סימני "הערה" (Comment) ב-SQL. הם גורמים למסד הנתונים להתעלם מכל מה שכתוב אחריהם בשאילתה (כמו הגרש הסוגר המקורי של הקוד), ובכך מונעים שגיאת תחביר.

**התוצאה:** השאילתה מתבצעת בהצלחה, ומסד הנתונים "משתכנע" שהפרטים נכונים. התוקף יחובר לחשבון של John מבלי לדעת את הסיסמה.

---

## תשובות לשאלות המשימה (Task 2)

* **שאלה:** איזה אופרטור בוליאני בודק אם לפחות צד אחד של האופרטור הוא אמת כדי שהתנאי כולו יהיה אמת?
* **תשובה:** `OR`


* **שאלה:** האם הביטוי `1=1` בשאילתת SQL הוא תמיד אמת? (YEA/NAY)
* **תשובה:** `YEA`



---
<img width="1753" height="586" alt="image" src="https://github.com/user-attachments/assets/54f899ca-77ac-4b76-b79c-497c38e7175d" />

#:

---

# מדריך: כלי הזרקת SQL אוטומטי (SQLMap)

ביצוע מתקפת SQL Injection ידנית דורש זמן רב: גילוי נקודת התורפה, זיהוי סוג מסד הנתונים, ובניית שאילתות לשליפת המידע. **SQLMap** הוא הכלי המוביל בעולם לאוטומציה של התהליך הזה.

> **הערה:** הפקודות במשימה זו הן לצורך הדגמה על אתר דמיוני (`http://sqlmaptesting.thm`). במשימה הבאה תבצעו תרגול מעשי על אתר חי.

---

## 🛠️ התחלת עבודה עם SQLMap

SQLMap הוא כלי מבוסס שורת פקודה (CLI). אם אתם מתחילים וחוששים מכל הדגלים (Flags), הכלי מציע "אשף" (Wizard) שידריך אתכם צעד אחר צעד:

```bash
sqlmap --wizard

```

### 1. סריקה בסיסית (GET-based)

כאשר אתר משתמש בפרמטרים בכתובת ה-URL (כמו `?cat=1`), אנו משתמשים בדגל `-u`.
דוגמה לסריקה המזהה אם הפרמטר פגיע:

```bash
sqlmap -u http://sqlmaptesting.thm/search/cat=1

```

בשלב זה SQLMap יבצע בדיקות היוריסטיות, יבדוק אם יש WAF (חומת אש לאפליקציות) ויזהה את סוג ההזרקה (למשל: Time-based blind או UNION query).

### 2. שימוש בעוגיות (Cookie-based)

לפעמים דפים פגיעים נמצאים מאחורי דף התחברות. במקרה כזה, נצטרך לספק ל-SQLMap את ה-Cookie שלנו כדי שיוכל לגשת לדף כמשתמש מחובר:

```bash
sqlmap -u "http://target.com/admin" --cookie="PHPSESSID=abcdef123456"

```

### 3. בדיקת בקשות POST

במקרים של טפסי התחברות או הרשמה, הנתונים לא מופיעים ב-URL אלא בגוף הבקשה (Body). הדרך המקצועית ביותר לעשות זאת היא לשמור את הבקשה מתוך Burp Suite לקובץ טקסט ולהריץ:

```bash
sqlmap -r request.txt

```

---

## 📊 שלבי שליפת המידע (Enumeration)

אחרי שווידאנו שהאתר פגיע, נתקדם בשלבים הבאים כדי להוציא את המידע:

| שלב | המטרה | הפקודה |
| --- | --- | --- |
| **שלב 1** | מציאת שמות מסדי הנתונים | `sqlmap -u [URL] --dbs` |
| **שלב 2** | מציאת טבלאות במסד נתונים ספציפי | `sqlmap -u [URL] -D [db_name] --tables` |
| **שלב 3** | שליפת הנתונים מתוך טבלה | `sqlmap -u [URL] -D [db_name] -T [table_name] --dump` |

---

## תשובות לשאלות המשימה (Task 3)

* **שאלה:** באיזה דגל בכלי SQLMap משתמשים כדי לשלוף את כל מסדי הנתונים הזמינים?
* **תשובה:** `--dbs`


* **שאלה:** מה תהיה הפקודה המלאה ב-SQLMap לצורך שליפת כל הטבלאות מתוך מסד הנתונים "members"? (כתובת האתר: `http://sqlmaptesting.thm/search/cat=1`)
* **תשובה:** `sqlmap -u http://sqlmaptesting.thm/search/cat=1 -D members --tables`

<img width="1788" height="479" alt="image" src="https://github.com/user-attachments/assets/5a17fded-0187-45a9-9f62-06eb32d0a411" />



*

> **אזהרה אתית:** תמיד תוסיף למדריך שלך דיסקליימר (Disclaimer) שהשימוש בכלי נועד למטרות לימודיות ומורשות בלבד.

**האם תרצה שאעזור לך לנסח קובץ `README.md` שלם למאגר שלך ב-GitHub עם הסברים מפורטים יותר?**
